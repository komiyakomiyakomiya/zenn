---
title: "Pythonã§Googleç¿»è¨³"
emoji: "ğŸ¦”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python", "gcp"]
published: false
---


# ã‚„ã‚Šæ–¹1
ç¿»è¨³ã—ãŸã„å˜èªã‚„æ–‡ç« ã®æ•°ãŒå°‘ãªã„å ´åˆã¯ã“ã¡ã‚‰ãŒãŠæ‰‹è»½ã§ã™ã€‚

```sh
$ pip install googletrans
```

```py
from google.cloud import translate

s = 'cat'
translator = Translator()
response = translator.translate(s, dest="ja")
result = response.text
print(result)
```

## å‚ç…§

* https://github.com/ssut/py-googletrans
â€» google translate apiãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ãŒã€Googleå…¬å¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

* https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
â€» ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤šã™ãã‚‹ã¨åˆ¶é™ãŒã‹ã‹ã‚Šã¾ã™ã€‚ (ä¸€å®šæ™‚é–“çµŒéã™ã‚‹ã¨å¾©æ´»ã—ã¾ã™ã€‚)

# ã‚„ã‚Šæ–¹2
## GCP ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²
[ã€ç”»åƒã§èª¬æ˜ã€‘Google Cloud Platform (GCP)ã®ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²](https://qiita.com/komiya_____/items/14bd06d0866f182ae912)
<br>

## Google Cloud SDK ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
[Google Cloud SDK ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ~ åˆæœŸåŒ–](https://qiita.com/komiya_____/items/5af0dcc8639fad9fee29)
<br>

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
[Google Cloud SDKã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹](https://qiita.com/komiya_____/items/fb02f38e1886db280d52)
â€» è«‹æ±‚å…ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®šã‚‚å¿˜ã‚Œãšã«
<br>

## APIã‚’æœ‰åŠ¹åŒ–

$ gcloud projects list

$ gcloud config set project "YOUR-PROJECT-ID"

åˆ©ç”¨å¯èƒ½ãªAPIã‚’ä¸€è¦§è¡¨ç¤º
```sh
$ gcloud services list --available

NAME                                                  TITLE
abusiveexperiencereport.googleapis.com                Abusive Experience Report API
acceleratedmobilepageurl.googleapis.com               Accelerated Mobile Pages (AMP) URL API
accessapproval.googleapis.com                         Access Approval API
accesscontextmanager.googleapis.com                   Access Context Manager API
...
```

ä»Šå›ã¯translate APIãªã®ã§grepã§çµã‚Šè¾¼ã¿
```sh
$ gcloud services list --available | grep translate

translate.googleapis.com                              Cloud Translation API
```

ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æœ‰åŠ¹ãªAPIã‚’èª¿ã¹ã‚‹
```sh
$ gcloud services list --enabled

NAME                              TITLE
bigquery.googleapis.com           BigQuery API
bigquerystorage.googleapis.com    BigQuery Storage API
billingbudgets.googleapis.com     Cloud Billing Budget API
cloudapis.googleapis.com          Google Cloud APIs
...
```

translate.googleapis.comãŒãªã‘ã‚Œã°æœ‰åŠ¹åŒ–
```sh
$ gcloud services enable translate.googleapis.com
```

# ã‚³ãƒ¼ãƒ‰

```py
from google.cloud import translate


def translate_text(text, project_id):
    client = translate.TranslationServiceClient()
    location = "global"
    parent = f"projects/{project_id}/locations/{location}"
    response = client.translate_text(
        request={
            "parent": parent,
            "contents": [text],
            "mime_type": "text/plain",  # mime types: text/plain, text/html
            "source_language_code": "en-US",  # ç¿»è¨³å‰ã®è¨€èªã‚’æŒ‡å®š
            "target_language_code": "ja",  # ç¿»è¨³å¾Œã®è¨€èªã‚’æŒ‡å®š
        }
    )
    for translation in response.translations:
        result = translation.translated_text
    return result


s = 'cat'
project_id = "pj-komiya"
result = translate_text(s, project_id)
print(result)
```

ã¡ãªã¿ã«responseã®ä¸­èº«ã¯ã“ã‚“ãªæ§‹é€ 

```py
...
def translate_text(text, project_id):
    client = translate.TranslationServiceClient()
    location = "global"
    parent = f"projects/{project_id}/locations/{location}"
    response = client.translate_text(
        request={
            "parent": parent,
            "contents": [text],
            "mime_type": "text/plain",  # mime types: text/plain, text/html
            "source_language_code": "en-US",  # ç¿»è¨³å‰ã®è¨€èªã‚’æŒ‡å®š
            "target_language_code": "ja",  # ç¿»è¨³å¾Œã®è¨€èªã‚’æŒ‡å®š
        }
    )
    for translation in response.translations:
        print(response)
        # translations {
        #   translated_text: "\343\203\215\343\202\263"
        # }

        print(response.translations)
        # [translated_text: "\343\203\215\343\202\263"
        # ]

        print(translation)
        # translated_text: "\343\203\215\343\202\263"

        print(translation.translated_text)
        # ãƒã‚³
...
```


## å‚ç…§
* https://cloud.google.com/translate/docs/setup
* https://cloud.google.com/endpoints/docs/openapi/enable-api?hl=ja#gcloud
* https://cloud.google.com/translate/docs/advanced/translating-text-v3


## ã¡ãªã¿ã«
Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã®ç¿»è¨³æ–¹æ³•ã§ã™ã€‚
[Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã¾ã¨ã‚ã¦Googleç¿»è¨³](https://zenn.dev/komiya/articles/e493c97c8591823ac58cï½ˆ